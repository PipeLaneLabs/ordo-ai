---
config:
  layout: dagre
  theme: base
  themeVariables:
    fontSize: 14px
---
flowchart TB
    Start(("ğŸš€ START<br>PROJECT")) --> Orchestrator["ğŸ¯ Orchestration Controller<br>(LangGraph State Manager)"]
    Orchestrator --> T1_ReqAgent["ğŸ“ Requirements & Strategy Agent"]
    T1_ReqAgent --> T1_Requirements[("ğŸ“„ REQUIREMENTS.md")]
    T1_Requirements --> T1_StratAgent["âœ… Strategy Validator Agent"]
    T1_StratAgent --> T1_ValidationReport[("ğŸ“Š VALIDATION_REPORT.md")]
    T1_ValidationReport --> T1_StratDecision{"Validation<br>Status?"}
    T1_StratDecision -- âŒ REJECTED<br>(Blocking Issues) --> T1_ReqAgent
    T1_StratDecision -- "âš ï¸ NEEDS REFINEMENT<br>(Non-blocking Issues)" --> T1_ReqAgent
    T1_StratDecision -- âœ… APPROVED --> T1_ArchAgent["ğŸ›ï¸ Solution Architect Agent"]
    T1_ArchAgent --> T1_Architecture[("ğŸ—ï¸ ARCHITECTURE.md")]
    T1_Architecture --> QG1{"ğŸ‘¤ HUMAN GATE 1<br>Approve Plan?<br>(Optional)"}
    QG1 -- âŒ REJECT --> T1_ReqAgent
    QG1 -- âœ… APPROVE --> T2_PlanAgent["ğŸ“‹ Implementation Planner Agent"]
    T2_PlanAgent --> T2_Tasks[("âœ… TASKS.md<br>+ Config Files")]
    T2_Tasks --> T2_ParallelStart{{"âš¡ PARALLEL<br>EXECUTION"}}
    T2_ParallelStart --> T2_DepAgent["ğŸ”— Dependency Resolver Agent"] & T2_InfraAgent["ğŸ—ï¸ Infrastructure Setup Agent"] & T2_ObsAgent["ğŸ“Š Observability Agent"]
    T2_DepAgent --> T2_Dependencies[("ğŸ“¦ DEPENDENCIES.md<br>requirements.txt")]
    T2_InfraAgent --> T2_InfraConfig[("âš™ï¸ INFRASTRUCTURE.md<br>DEVELOPER_GUIDE.md<br>docker-compose.yml")]
    T2_ObsAgent --> T2_ObsConfig[("ğŸ“ˆ OBSERVABILITY.md")]
    T2_Dependencies --> T2_ParallelEnd{{"ğŸ”„ SYNC<br>POINT"}}
    T2_InfraConfig --> T2_ParallelEnd
    T2_ObsConfig --> T2_ParallelEnd
    T2_ParallelEnd --> T2_DepCheck{"Dependency<br>Conflicts?"}
    T2_DepCheck -- âŒ YES<br>(Conflicts Found) --> DevHandler["âš ï¸ Deviation Handler<br>(Root Cause Analyzer)"]
    T2_DepCheck -- âœ… NO<br>(Clean) --> QG2{"ğŸ‘¤ HUMAN GATE 2<br>Environment Ready?<br>(Optional)"}
    QG2 -- âŒ REJECT --> T2_InfraAgent
    QG2 -- âœ… APPROVE --> T3_SWEAgent["ğŸ’» Software Engineer Agent"]
    T3_SWEAgent --> T3_CodeFiles[("ğŸ’¾ CODE_FILES/**<br>*.py, *.js, *.java")]
    T3_CodeFiles --> T3_StaticAgent["âš¡ Static Analysis Agent<br>(Fast 10s Check)"]
    T3_StaticAgent --> T3_ComplianceLog[("ğŸ“‹ COMPLIANCE_LOG.md")]
    T3_ComplianceLog --> T3_StaticDecision{"Syntax/Style/<br>Type Check<br>Pass?"}
    T3_StaticDecision -- âŒ FAIL<br>(Syntax/Style/Type) --> T3_SWEAgent
    T3_StaticDecision -- âœ… PASS --> T3_QualityAgent["ğŸ§ª Quality Engineer Agent"]
    T3_QualityAgent --> T3_TestFiles[("ğŸ§ª TEST_FILES/**<br>test_*.py")]
    T3_TestFiles --> T3_QualityReport[("ğŸ“Š QUALITY_REPORT.md")]
    T3_QualityReport --> T3_TestGate{"All Tests<br>Pass?"}
    T3_TestGate -- âŒ FAIL --> DevHandler
    T3_TestGate -- âœ… PASS --> T3_CoverageGate{"Coverage<br>&gt;= 85%?"}
    T3_CoverageGate -- âŒ FAIL<br>(&lt; 85%) --> DevHandler
    T3_CoverageGate -- âœ… PASS --> QG3{"ğŸ‘¤ HUMAN GATE 3<br>Code Complete?<br>(Optional)"}
    QG3 -- âŒ REJECT --> T3_SWEAgent
    QG3 -- âœ… APPROVE --> T4_ParallelStart{{"âš¡ PARALLEL<br>VALIDATION"}}
    T4_ParallelStart --> T4_SecAgent["ğŸ”’ Security Validator Agent"] & T4_ProdAgent["âœ¨ Product Validator Agent"]
    T4_SecAgent --> T4_SecurityReport[("ğŸ›¡ï¸ SECURITY_REPORT.md<br>CRISIS.md")]
    T4_ProdAgent --> T4_AcceptanceReport[("âœ… ACCEPTANCE_REPORT.md<br>Traceability Matrix")]
    T4_SecurityReport --> T4_ParallelEnd{{"ğŸ”„ VALIDATION<br>SYNC"}}
    T4_AcceptanceReport --> T4_ParallelEnd
    T4_ParallelEnd --> T4_SecurityGate{"Security<br>Vulnerabilities<br>Found?"} & T4_ProductGate{"Requirements<br>Met?"}
    T4_SecurityGate -- âŒ FAIL<br>(Vulnerabilities) --> DevHandler
    T4_SecurityGate -- âœ… PASS --> T4_BothCheck{"Both<br>Security &amp; Product<br>Pass?"}
    T4_ProductGate -- âŒ FAIL<br>(Spec Gap) --> DevHandler
    T4_ProductGate -- âœ… PASS --> T4_BothCheck
    T4_BothCheck -- âœ… Both Pass --> QG4{"ğŸ‘¤ HUMAN GATE 4<br>Validation Sign-off?<br>(Optional)"}
    T4_BothCheck -- âŒ Either Fail --> DevHandler
    QG4 -- âŒ REJECT --> DevHandler
    QG4 -- âœ… APPROVE --> T5_DocsAgent["ğŸ“š Documentation Agent"]
    T5_DocsAgent --> T5_DocFiles[("ğŸ“– README.md<br>API_DOCS.md<br>CHANGELOG.md<br>DEVELOPER_GUIDE.md")]
    T5_DocFiles --> T5_DeployAgent["ğŸš€ Deployment Agent"]
    T5_DeployAgent --> T5_DeployConfig[("ğŸ“¦ DEPLOYMENT.md<br>RELEASE_NOTES.md<br>Dockerfile<br>k8s manifests")]
    T5_DeployConfig --> T5_StagingTest{"â˜ï¸ Staging<br>Smoke Tests<br>+ Rollback Test<br>Pass?"}
    T5_StagingTest -- âŒ FAIL --> DevHandler
    T5_StagingTest -- âœ… PASS --> T5_CommitAgent["ğŸ”„ Commit Agent<br>(Optional - Git Ops)"]
    T5_CommitAgent --> T5_CommitLog[("ğŸ“ COMMIT_LOG.md<br>Git commits")]
    T5_CommitLog --> QG5{"ğŸ‘¤ HUMAN GATE 5<br>Push to Production?"}
    QG5 -- âŒ REJECT --> T5_DeployAgent
    QG5 -- âœ… APPROVE --> EndState(("ğŸ‰ PRODUCTION<br>LIVE"))
    DevHandler --> DevLog[("ğŸ“‹ DEVIATION_LOG.md")]
    DevLog --> LoopCounter{"Loop Count<br>&gt; 3?"}
    LoopCounter -- âš ï¸ YES<br>(&gt; 3 iterations) --> HumanEscalate["ğŸš¨ HUMAN ESCALATION<br>(Critical Blocker)"]
    LoopCounter -- âœ… NO<br>(â‰¤ 3 iterations) --> RouteDecision{"ğŸ” ROOT CAUSE<br>ANALYSIS"}
    RouteDecision -- ğŸ› Code Bug --> T3_SWEAgent
    RouteDecision -- ğŸ“‹ Spec Ambiguity<br>or Gap --> T1_ReqAgent
    RouteDecision -- ğŸ—ï¸ Architectural Flaw<br>or Constraint --> T1_ArchAgent
    RouteDecision -- âš™ï¸ Config Issue<br>or Env Failure --> T2_InfraAgent
    RouteDecision -- ğŸ“¦ Dependency Conflict<br>or Missing Pkg --> T2_DepAgent
    RouteDecision -- ğŸ§ª Test Issue<br>or Coverage Gap --> T3_QualityAgent
    RouteDecision -- ğŸ“Š Observability Gap<br>or Missing Metrics --> T2_ObsAgent
    RouteDecision -- ğŸ”§ Tool Config Error<br>(pyproject/eslint) --> T2_PlanAgent
    RouteDecision -- ğŸ”’ Security Vulnerability<br>(Critical) --> T4_SecAgent
    RouteDecision -- âœ¨ Product/UX Gap<br>or Req Mismatch --> T4_ProdAgent
    Orchestrator -. ğŸ‘ï¸ Monitors .-> T1_ReqAgent & T2_PlanAgent & T3_SWEAgent & T4_ParallelStart & T5_DocsAgent
    Orchestrator -. ğŸ‘ï¸ Tracks State .-> DevHandler

     Start:::startEnd
     Orchestrator:::orchestration
     T1_ReqAgent:::agent
     T1_Requirements:::artifact
     T1_StratAgent:::agent
     T1_ValidationReport:::artifact
     T1_StratDecision:::decision
     T1_ArchAgent:::agent
     T1_Architecture:::artifact
     QG1:::humanGate
     T2_PlanAgent:::agent
     T2_Tasks:::artifact
     T2_ParallelStart:::parallel
     T2_DepAgent:::agent
     T2_InfraAgent:::agent
     T2_ObsAgent:::agent
     T2_Dependencies:::artifact
     T2_InfraConfig:::artifact
     T2_ObsConfig:::artifact
     T2_ParallelEnd:::parallel
     T2_DepCheck:::decision
     DevHandler:::deviation
     QG2:::humanGate
     T3_SWEAgent:::agent
     T3_CodeFiles:::artifact
     T3_StaticAgent:::agent
     T3_ComplianceLog:::artifact
     T3_StaticDecision:::decision
     T3_QualityAgent:::agent
     T3_TestFiles:::artifact
     T3_QualityReport:::artifact
     T3_TestGate:::decision
     T3_CoverageGate:::decision
     QG3:::humanGate
     T4_ParallelStart:::parallel
     T4_SecAgent:::agent
     T4_ProdAgent:::agent
     T4_SecurityReport:::artifact
     T4_AcceptanceReport:::artifact
     T4_ParallelEnd:::parallel
     T4_SecurityGate:::decision
     T4_ProductGate:::decision
     T4_BothCheck:::decision
     QG4:::humanGate
     T5_DocsAgent:::agent
     T5_DocFiles:::artifact
     T5_DeployAgent:::agent
     T5_DeployConfig:::artifact
     T5_StagingTest:::decision
     T5_CommitAgent:::agent
     T5_CommitLog:::artifact
     QG5:::humanGate
     EndState:::startEnd
     DevLog:::artifact
     LoopCounter:::decision
     HumanEscalate:::humanGate
     RouteDecision:::decision
    classDef startEnd fill:#4CAF50,stroke:#2E7D32,stroke-width:4px,color:#fff,font-weight:bold
    classDef agent fill:#2196F3,stroke:#1565C0,stroke-width:2px,color:#fff
    classDef artifact fill:#FFF59D,stroke:#F57F17,stroke-width:2px,color:#000
    classDef decision fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#fff
    classDef humanGate fill:#F44336,stroke:#B71C1C,stroke-width:3px,color:#fff,font-weight:bold
    classDef deviation fill:#E91E63,stroke:#880E4F,stroke-width:3px,color:#fff,font-weight:bold
    classDef parallel fill:#9C27B0,stroke:#4A148C,stroke-width:2px,color:#fff
    classDef orchestration fill:#009688,stroke:#004D40,stroke-width:3px,color:#fff,font-weight:bold